---
import Layout from '../layouts/Layout.astro';
import { getPayloadData } from '../lib/payload';

const page = await getPayloadData('pages', 'about');
const heroBlock = page?.docs?.[0]?.layout?.find((block: any) => block.blockType === 'hero');

const title = page?.docs?.[0]?.title || 'Sobre a Ouro Fino';
const heroHeading = heroBlock?.heading || 'Sobre a Ouro Fino';
const heroText = heroBlock?.text || 'Nossa história começa com a paixão pela terra e pelo que ela nos oferece de melhor.';
---

<Layout title={title}>
  <section class="container mx-auto px-4 py-8 md:py-12">
    <div class="mx-auto max-w-3xl space-y-6">
      <h1 class="text-3xl font-bold leading-tight tracking-tighter md:text-4xl">{heroHeading}</h1>
      <p class="text-lg text-muted-foreground">
        {heroText}
      </p>
      
      {!page && (
        <div class="p-4 bg-yellow-50 text-yellow-800 rounded-md">
          <p>Nota: O conteúdo acima é estático. Certifique-se de que o Payload CMS está rodando e a página 'about' existe.</p>
        </div>
      )}

      {/* Placeholder for rich text content */}
      <div class="prose prose-gray dark:prose-invert max-w-none">
        <p>
          Aqui você encontrará produtos selecionados e eventos que conectam você à natureza.
          Trabalhamos incansavelmente para trazer qualidade e experiências memoráveis.
        </p>
        <p>
          Este espaço é dedicado a compartilhar nossa visão e nossos valores.
        </p>
      </div>
    </div>
  </section>
</Layout>
