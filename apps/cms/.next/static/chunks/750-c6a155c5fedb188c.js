"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[750],{9647:(e,a,t)=>{t.d(a,{LanguageSelector:()=>s});var l=t(2140),i=t(6464),n=t(4287),r=t(5393);t(1167);let s=e=>{let a,t;let s=(0,l.c)(8),{languageOptions:o}=e,{i18n:u,switchLanguage:c}=(0,n.d)();if(s[0]!==c?(a=async e=>{await c(e.value)},s[0]=c,s[1]=a):a=s[1],s[2]!==u.language||s[3]!==o||s[4]!==a){let e;s[6]!==u.language?(e=e=>e.value===u.language,s[6]=u.language,s[7]=e):e=s[7],t=(0,i.jsx)(r.ReactSelect,{inputId:"language-select",isClearable:!1,onChange:a,options:o,value:o.find(e)}),s[2]=u.language,s[3]=o,s[4]=a,s[5]=t}else t=s[5];return t}},2928:(e,a,t)=>{t.d(a,{ToggleTheme:()=>o});var l=t(2140),i=t(6464),n=t(8810),r=t(4287),s=t(5393);t(1167);let o=()=>{let e,a;let t=(0,l.c)(7),{autoMode:o,setTheme:u,theme:c}=(0,n.h)(),{t:d}=(0,r.d)();t[0]!==u?(e=e=>{u(e)},t[0]=u,t[1]=e):e=t[1];let m=e;return t[2]!==d||t[3]!==o||t[4]!==c||t[5]!==m?(a=(0,i.jsx)(s.RadioGroupField,{disableModifyingForm:!0,field:{name:"theme",label:d("general:adminTheme"),options:[{label:d("general:automatic"),value:"auto"},{label:d("general:light"),value:"light"},{label:d("general:dark"),value:"dark"}]},onChange:m,path:"theme",value:o?"auto":c}),t[2]=d,t[3]=o,t[4]=c,t[5]=m,t[6]=a):a=t[6],a}},3511:(e,a,t)=>{t.d(a,{AccountClient:()=>s});var l=t(2140),i=t(5393),n=t(4287),r=t(1167);let s=()=>{let e,a;let t=(0,l.c)(4),{setStepNav:s}=(0,i.useStepNav)(),{t:o}=(0,n.d)();return t[0]!==o||t[1]!==s?(e=()=>{let e=[];e.push({label:o("authentication:account"),url:"/account"}),s(e)},a=[s,o],t[0]=o,t[1]=s,t[2]=e,t[3]=a):(e=t[2],a=t[3]),r.useEffect(e,a),null}},9319:(e,a,t)=>{t.d(a,{CreateFirstUserClient:()=>u});var l=t(6464),i=t(8810),n=t(5393),r=t(4287),s=t(8462),o=t(1167);let u=e=>{let{docPermissions:a,docPreferences:t,initialState:u,loginWithUsername:c,userSlug:d}=e,{config:{routes:{admin:m,api:h},serverURL:g},getEntityConfig:f}=(0,i.b)(),{getFormState:p}=(0,n.useServerFunctions)(),{t:v}=(0,r.d)(),{setUser:x}=(0,n.useAuth)(),w=o.useRef(null),j=f({collectionSlug:d}),b=o.useCallback(async e=>{let{formState:l}=e;(0,s.jg)(w.current);let i=new AbortController;w.current=i;let n=await p({collectionSlug:d,docPermissions:a,docPreferences:t,formState:l,operation:"create",schemaPath:"_".concat(d,".auth"),signal:i.signal});if(n&&n.state)return n.state},[d,p,a,t]);return(0,o.useEffect)(()=>()=>{(0,s.jg)(w.current)},[]),(0,l.jsxs)(n.Form,{action:"".concat(g).concat(h,"/").concat(d,"/first-register"),initialState:u,method:"POST",onChange:[b],onSuccess:e=>{x(e)},redirect:m,validationOperation:"create",children:[(0,l.jsx)(n.EmailAndUsernameFields,{className:"emailAndUsername",loginWithUsername:c,operation:"create",readOnly:!1,t:v}),(0,l.jsx)(n.PasswordField,{autoComplete:"off",field:{name:"password",label:v("authentication:newPassword"),required:!0},path:"password"}),(0,l.jsx)(n.ConfirmPasswordField,{}),(0,l.jsx)(n.RenderFields,{fields:j.fields,forceRender:!0,parentIndexPath:"",parentPath:"",parentSchemaPath:d,permissions:!0,readOnly:!1}),(0,l.jsx)(n.FormSubmit,{size:"large",children:v("general:create")})]})}},6437:(e,a,t)=>{t.d(a,{ForgotPasswordForm:()=>d});var l=t(2140),i=t(6464),n=t(8810),r=t(4287),s=t(5393),o=t(2822),u=t(1167);function c({description:e,heading:a}){return a?(0,i.jsxs)("div",{className:"form-header",children:[(0,i.jsx)("h1",{children:a}),!!e&&(0,i.jsx)("p",{children:e})]}):null}let d=()=>{var e,a;let t,d,m,h;let g=(0,l.c)(17),{config:f}=(0,n.b)(),{admin:p,routes:v}=f,{user:x}=p,{api:w}=v,{t:j}=(0,r.d)(),[b,S]=(0,u.useState)(!1);g[0]!==f.collections||g[1]!==x?(t=null===(a=f.collections)||void 0===a?void 0:a.find(e=>(null==e?void 0:e.slug)===x),g[0]=f.collections,g[1]=x,g[2]=t):t=g[2];let F=t,P=null==F?void 0:null===(e=F.auth)||void 0===e?void 0:e.loginWithUsername;g[3]!==j||g[4]!==P?(d=(e,a,t)=>{e.json().then(()=>{S(!0),a(j("general:submissionSuccessful"))}).catch(()=>{t(P?j("authentication:usernameNotValid"):j("authentication:emailNotValid"))})},g[3]=j,g[4]=P,g[5]=d):d=g[5];let y=d;if(g[6]!==P||g[7]!==b||g[8]!==j||g[9]!==w||g[10]!==x||g[11]!==f||g[12]!==y){h=Symbol.for("react.early_return_sentinel");e:{let e=P?{username:{initialValue:"",valid:!0,value:void 0}}:{email:{initialValue:"",valid:!0,value:void 0}};if(b){let e;g[15]!==j?(e=(0,i.jsx)(c,{description:j("authentication:checkYourEmailForPasswordReset"),heading:j("authentication:emailSent")}),g[15]=j,g[16]=e):e=g[16],h=e;break e}m=(0,i.jsxs)(s.Form,{action:"".concat(w,"/").concat(x,"/forgot-password"),handleResponse:y,initialState:e,method:"POST",children:[(0,i.jsx)(c,{description:P?j("authentication:forgotPasswordUsernameInstructions"):j("authentication:forgotPasswordEmailInstructions"),heading:j("authentication:forgotPassword")}),P?(0,i.jsx)(s.TextField,{field:{name:"username",label:j("authentication:username"),required:!0},path:"username",validate:e=>(0,o.fL)(e,{name:"username",type:"text",data:{},preferences:{fields:{}},req:{payload:{config:f},t:j},required:!0,siblingData:{}})}):(0,i.jsx)(s.EmailField,{field:{name:"email",admin:{autoComplete:"email"},label:j("general:email"),required:!0},path:"email",validate:e=>(0,o.Do)(e,{name:"email",type:"email",data:{},preferences:{fields:{}},req:{payload:{config:f},t:j},required:!0,siblingData:{}})}),(0,i.jsx)(s.FormSubmit,{size:"large",children:j("general:submit")})]})}g[6]=P,g[7]=b,g[8]=j,g[9]=w,g[10]=x,g[11]=f,g[12]=y,g[13]=m,g[14]=h}else m=g[13],h=g[14];return h!==Symbol.for("react.early_return_sentinel")?h:m}},4793:(e,a,t)=>{t.d(a,{LoginForm:()=>f});var l=t(2140),i=t(6464),n=t(4504),r=t(1167),s=t(8810),o=t(4287),u=t(5393),c=t(8462),d=t(2822);let m=e=>{let a=(0,l.c)(11),{type:t,required:n}=e,r=void 0===n||n,{t:s}=(0,o.d)();if("email"===t){let e;return a[0]!==s||a[1]!==r?(e=(0,i.jsx)(u.EmailField,{field:{name:"email",admin:{autoComplete:"email"},label:s("general:email"),required:r},path:"email",validate:d.Do}),a[0]=s,a[1]=r,a[2]=e):e=a[2],e}if("username"===t){let e;return a[3]!==s||a[4]!==r?(e=(0,i.jsx)(u.TextField,{field:{name:"username",label:s("authentication:username"),required:r},path:"username",validate:d.b6}),a[3]=s,a[4]=r,a[5]=e):e=a[5],e}if("emailOrUsername"===t){let e;if(a[6]!==s||a[7]!==r){let t;a[9]!==s?(t=(e,a)=>{let t=(0,d.b6)(e,a),l=(0,d.Do)(e,a);return!!l||!!t||"".concat(s("general:email"),": ").concat(l," ").concat(s("general:username"),": ").concat(t)},a[9]=s,a[10]=t):t=a[10],e=(0,i.jsx)(u.TextField,{field:{name:"username",label:s("authentication:emailOrUsername"),required:r},path:"username",validate:t}),a[6]=s,a[7]=r,a[8]=e}else e=a[8];return e}return null},h="login__form",g=n.default.default||n.default,f=e=>{let a,t,n;let d=(0,l.c)(22),{prefillEmail:f,prefillPassword:p,prefillUsername:v,searchParams:x}=e,{config:w}=(0,s.b)(),{admin:j,routes:b}=w,{routes:S,user:F}=j,{forgot:P}=S,{admin:y,api:C}=b;if(d[0]!==w.collections||d[1]!==F){var _;a=null===(_=w.collections)||void 0===_?void 0:_.find(e=>(null==e?void 0:e.slug)===F),d[0]=w.collections,d[1]=F,d[2]=a}else a=d[2];let{auth:O}=a,R=O.loginWithUsername,T=!O.loginWithUsername||O.loginWithUsername.allowEmailLogin,U=O.loginWithUsername;d[3]!==T||d[4]!==U?(t=()=>T&&U?"emailOrUsername":U?"username":"email",d[3]=T,d[4]=U,d[5]=t):t=d[5];let[k]=r.useState(t),{t:E}=(0,o.d)(),{setUser:N}=(0,u.useAuth)(),q=null!=p?p:void 0,A=null!=p?p:void 0;if(d[6]!==q||d[7]!==A||d[8]!==R||d[9]!==v||d[10]!==f||d[11]!==N||d[12]!==C||d[13]!==F||d[14]!==(null==x?void 0:x.redirect)||d[15]!==y||d[16]!==k||d[17]!==E||d[18]!==P){let e;let a={password:{initialValue:q,valid:!0,value:A}};R?a.username={initialValue:null!=v?v:void 0,valid:!0,value:null!=v?v:void 0}:a.email={initialValue:null!=f?f:void 0,valid:!0,value:null!=f?f:void 0},d[20]!==N?(e=e=>{N(e)},d[20]=N,d[21]=e):e=d[21];let t=e;n=(0,i.jsxs)(u.Form,{action:"".concat(C,"/").concat(F,"/login"),className:h,disableSuccessStatus:!0,initialState:a,method:"POST",onSuccess:t,redirect:"string"==typeof(null==x?void 0:x.redirect)?x.redirect:y,waitForAutocomplete:!0,children:[(0,i.jsxs)("div",{className:"".concat(h,"__inputWrap"),children:[(0,i.jsx)(m,{type:k}),(0,i.jsx)(u.PasswordField,{field:{name:"password",label:E("general:password"),required:!0},path:"password"})]}),(0,i.jsx)(g,{href:(0,c.$9)({adminRoute:y,path:P}),prefetch:!1,children:E("authentication:forgotPasswordQuestion")}),(0,i.jsx)(u.FormSubmit,{size:"large",children:E("authentication:login")})]}),d[6]=q,d[7]=A,d[8]=R,d[9]=v,d[10]=f,d[11]=N,d[12]=C,d[13]=F,d[14]=null==x?void 0:x.redirect,d[15]=y,d[16]=k,d[17]=E,d[18]=P,d[19]=n}else n=d[19];return n}},69:(e,a,t)=>{t.d(a,{LogoutClient:()=>m});var l=t(2140),i=t(6464),n=t(5393),r=t(4287),s=t(8462),o=t(4504),u=t(9525),c=t(1167);let d=o.default.default||o.default,m=e=>{let a,t,o,m,h;let g=(0,l.c)(19),{adminRoute:f,inactivity:p,redirect:v}=e,{logOut:x,user:w}=(0,n.useAuth)(),[j,b]=c.useState(!w),S=c.useRef(!1);g[0]!==f||g[1]!==p||g[2]!==v?(a=()=>(0,s.$9)({adminRoute:f,path:"/login".concat(p&&v&&v.length>0?"?redirect=".concat(encodeURIComponent(v)):"")}),g[0]=f,g[1]=p,g[2]=v,g[3]=a):a=g[3];let[F]=c.useState(a),{t:P}=(0,r.d)(),y=(0,u.useRouter)();g[4]!==x||g[5]!==p||g[6]!==P||g[7]!==y||g[8]!==F?(t=async()=>{let e=await x();if(b(e),!p&&e&&!S.current){n.toast.success(P("authentication:loggedOutSuccessfully")),S.current=!0,y.push(F);return}},g[4]=x,g[5]=p,g[6]=P,g[7]=y,g[8]=F,g[9]=t):t=g[9];let C=t;if(g[10]!==j||g[11]!==C?(o=()=>{j||C()},m=[C,j],g[10]=j,g[11]=C,g[12]=o,g[13]=m):(o=g[12],m=g[13]),(0,c.useEffect)(o,m),j&&p){let e;return g[14]!==P||g[15]!==F?(e=(0,i.jsxs)("div",{className:"".concat("logout","__wrap"),children:[(0,i.jsx)("h2",{children:P("authentication:loggedOutInactivity")}),(0,i.jsx)(n.Button,{buttonStyle:"secondary",el:"link",Link:d,size:"large",url:F,children:P("authentication:logBackIn")})]}),g[14]=P,g[15]=F,g[16]=e):e=g[16],e}return g[17]!==P?(h=(0,i.jsx)(n.LoadingOverlay,{animationDuration:"0ms",loadingText:P("authentication:loggingOut")}),g[17]=P,g[18]=h):h=g[18],h}},4744:(e,a,t)=>{t.d(a,{ResetPasswordForm:()=>d});var l=t(2140),i=t(6464),n=t(4287),r=t(8810),s=t(5393),o=t(8462),u=t(9525);t(1167);let c={"confirm-password":{initialValue:"",valid:!1,value:""},password:{initialValue:"",valid:!1,value:""}},d=e=>{let a,t;let d=(0,l.c)(11),{token:m}=e,h=(0,n.d)(),{config:g}=(0,r.b)(),{admin:f,routes:p,serverURL:v}=g,{routes:x,user:w}=f,{login:j}=x,{admin:b,api:S}=p,F=(0,u.useRouter)(),{fetchFullUser:P}=(0,s.useAuth)();d[0]!==P||d[1]!==F||d[2]!==b||d[3]!==j?(a=async()=>{await P()?F.push(b):F.push((0,o.$9)({adminRoute:b,path:j}))},d[0]=P,d[1]=F,d[2]=b,d[3]=j,d[4]=a):a=d[4];let y=a,C="".concat(v).concat(S,"/").concat(w,"/reset-password");return d[5]!==h||d[6]!==w||d[7]!==m||d[8]!==C||d[9]!==y?(t=(0,i.jsxs)(s.Form,{action:C,initialState:c,method:"POST",onSuccess:y,children:[(0,i.jsxs)("div",{className:"inputWrap",children:[(0,i.jsx)(s.PasswordField,{field:{name:"password",label:h.t("authentication:newPassword"),required:!0},path:"password",schemaPath:"".concat(w,".password")}),(0,i.jsx)(s.ConfirmPasswordField,{}),(0,i.jsx)(s.HiddenField,{path:"token",schemaPath:"".concat(w,".token"),value:m})]}),(0,i.jsx)(s.FormSubmit,{size:"large",children:h.t("authentication:resetPassword")})]}),d[5]=h,d[6]=w,d[7]=m,d[8]=C,d[9]=y,d[10]=t):t=d[10],t}},1309:(e,a,t)=>{t.d(a,{ToastAndRedirect:()=>s});var l=t(2140),i=t(5393),n=t(9525),r=t(1167);function s(e){let a,t;let s=(0,l.c)(5),{message:o,redirectTo:u}=e,c=(0,n.useRouter)(),d=r.useRef(!1);return s[0]!==o||s[1]!==c||s[2]!==u?(a=()=>{let e;return i.toast&&(e=setTimeout(()=>{i.toast.success(o),d.current=!0,c.push(u)},100)),()=>{e&&clearTimeout(e)}},t=[c,u,o],s[0]=o,s[1]=c,s[2]=u,s[3]=a,s[4]=t):(a=s[3],t=s[4]),(0,r.useEffect)(a,t),null}}}]);